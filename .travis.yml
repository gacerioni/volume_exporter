sudo: required

matrix:
  include:
    - language: go
      go: 
        - 1.12

    - language: bash
      services:
        - docker
      before_script:
        - docker --version
      script:
        - go build -ldflags '-d -s -w' -a -tags netgo -installsuffix netgo main.go
        - docker build -t mnadeem/volume_exporter .
      after_success:
        - if [ "$TRAVIS_BRANCH" == "master" ]; then
          docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD";
          docker push mnadeem/volume_exporter;
          fi

notifications:
  email:
    - "$EMAIL"